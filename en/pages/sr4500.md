# SR4500

[github repository](https://github.com/team-diana/swissranger_camera)

![SR4500](http://3.bp.blogspot.com/-DtIeKIs-NY8/UgE3UcHxSWI/AAAAAAAAG40/scq-IUzjy4U/s400/SR4500.jpg)

The Mesa Imaging SR4500 is an RF-modulated ToF camera. 


## ROS Node

The ROS Node for MESA's camera can be found [here](https://github.com/team-diana/swissranger_camera)
It's a fork of OpenPTrack/open_ptrack without with only the code to make the camera work.

Build the node, then source the devel/setup.sh in the workspace in order to be able to execute the node

## Run the SR4500

The **SR4500** starts listening for a **dhcp** service, but after 30s without any eth connection it fallbacks to a default static ip: **192.168.1.42**. So, wait 30s before connecting it and then setup the connection:

```bash
# ip addr add 192.168.1.42/24 dev eth0
# ip link set eth0 up
```

ping the sr4500 in order to check the connection.

then, launch this launch file

```xml
<!-- -*- mode: XML -*- -->
<launch>
  <arg name="device_ip" default="192.168.1.42" />
  <arg name="camera_id" default="SwissRanger" />

  <node pkg="swissranger_camera" type="swissranger_camera" name="$(arg camera_id)"
        output="screen" respawn="false">
    <param name="auto_exposure" value="1" />
    <!--param name="integration_time" value="40" /-->
    <param name="ether_addr" value="$(arg device_ip)" />
    <param name="camera_name" value="$(arg camera_id)" />    
  </node>
</launch>
```

You can change the **integration time** and **auto-exposure** using rqt reconfigure

Remember, greater integration time can be set when auto-exposure is off

You can see the output using rviz or with imageview

```bash
#example: using image view
rosrun image_view image_view image:=/SwissRanger/intensity/image_raw
```

There are 3 image source:

 * intensity
 * distance
 * confidence

The pointcloud is available at */SwissRanger/pointcloud2_raw*
Without any additional configurations, it may be necessary to set rviz's fixed frame to **SwissRanger** in order to show the point cloud.

## See also:

[Depth Camera only SLAM](depth_camera_only_slam.md)

## Links

[Mesa Imaging - SR4500](http://www.mesa-imaging.ch/products/sr4500/)
[ROS Wiki - Swissranger Camera](http://wiki.ros.org/swissranger_camera)

[Exploitation of Time-of-Flight (ToF) Cameras - IRI Technical Report](http://digital.csic.es/bitstream/10261/30066/1/time-of-flight.pdf)
